<!DOCTYPE html>
<html ng-app='app'>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title></title>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/stylesheets/music/music-player.css">
  </head>
  <body ng-controller = 'MainCtrl'>
    <div class="container-fluid">
      <div class="row" >
        <div ng-show='results.length == 0'>
          <input ng-model='json.api_key' type='text' placeholder='api key'/>
          <input ng-model='json.secret' type='password' placeholder='secret' />
          <i class="fa fa-refresh" ng-click = 'refresh()'></i>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 hidden-sm hidden-xs">
          <div class="embed-responsive embed-responsive-16by9">
            <youtube-video class="embed-responsive-item" video-url='ytVideoUrl' player='bestPlayer' player-vars='playerVars'></youtube-video>
          </div>
        </div>
        <div class="col-md-6 col-xs-12">
          <div ng-show='results.length > 0'>
            <div class="row">
              <p class="text-center" ng-click='playRandom()'>
              <i class="fa fa-random" alt = 'yes, I know'></i>
              </p>
            </div>
            <div class="row">
              <div ng-repeat = 'result in results' ng-class='{ selected: isSelected(result) }'>
                <div class="row" ng-hide="result.id == selected.id">
                  <div class="col-xs-10" ng-click='play(result)' style="white-space:nowrap; overflow: hidden; text-overflow:ellipsis">
                    {{ result.name || result }}
                  </div>
                  <div class="col-xs-2 text-center" ng-click='edit(result)'>
                    <i class="fa fa-edit"></i>
                  </div>
                </div>
                <div class="row" ng-show="result.id == selected.id">
                  <div class="col-xs-5">
                    <input class="form-control" ng-model='selected.name' placeholder='title' />
                  </div>
                  <div class="col-xs-5">
                    <input class="form-control" ng-model='selected.url' placeholder='url' />
                  </div>
                  <div class="col-xs-2 text-center">
                    <i class="fa fa-save" ng-click='update(selected)'></i>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <p class="text-center">
              <i class="fa fa-plus" ng-click = 'newSong()'></i>
              </p>
              <div class="row" ng-show="selected">
                <div class="col-xs-5">
                  <input class="form-control" ng-model='selected.name' placeholder='title' />
                </div>
                <div class="col-xs-5">
                  <input class="form-control" ng-model='selected.url' placeholder='url' />
                </div>
                <div class="col-xs-2">
                  <p class="text-center">
                  <i class="fa fa-save" ng-click = 'update(selected)'></i>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/javascripts/jnorthpole.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="/javascripts/music/angular-youtube-embed.js"></script>
    <script src="/javascripts/music/music-player.js"></script>
  </body>
</html>
